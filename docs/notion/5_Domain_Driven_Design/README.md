# 도메인 주도 개발 (Domain Driven Design)

도메인 주도 개발(DDD: Domain-Driven Design)은 마이크로서비스 아키텍처에서 중요한 역할을 합니다. 

마이크로서비스는 내부의 응집성을 강화하고 외부의 결합도를 낮추는 것을 목표로 하며, 이를 위해 도메인 주도 개발을 적용하는 것이 효과적입니다.

## 전략적 설계 (Strategic Design)

전략적 설계는 시스템의 전체 구조와 방향을 정의하는 과정입니다. 여기서는 전체 비즈니스 도메인을 이해하고, 이를 세부 하위 도메인으로 나누어 각각의 역할과 경계를 명확히 하고 관계를 설정합니다.

### 중요성

- **비즈니스 이해:** 시스템을 제대로 구축하려면 비즈니스 도메인을 깊이 이해해야 합니다. 문제를 파악하고 해결하기 위해서는 해당 문제가 발생하는 맥락(Context)을 알아야 합니다.

- **도메인 분리:** 비즈니스는 여러 주요 활동 영역, 즉 도메인으로 구성됩니다. 이 도메인들을 이해하고 분리하는 것은 시스템 설계에 매우 중요합니다.

### 하위 도메인 (Sub Domain) 유형

하위 도메인은 큰 비즈니스 도메인을 구성하는 세부 영역입니다.

**핵심 도메인 (Core Domain)**

- 회사의 주요 경쟁력이 되는 중요한 부분입니다.
- 복잡하지만 비즈니스의 핵심 가치를 제공합니다.
- 예시: 우버의 손님 매칭 서비스, 구글의 검색 알고리즘.

**일반 도메인 (Generic Domain)**

- 대부분의 회사가 비슷한 방식으로 수행하는 일반적인 비즈니스 활동입니다.
- 복잡할 수 있지만, 직접적인 경쟁력을 제공하지는 않습니다.

**지원 도메인 (Supporting Domain)**

- 비즈니스를 지원하는 활동으로, 상대적으로 기능이 단순합니다.
- 예시: 기본적인 CRUD 작업.

### 유비쿼터스 언어

**유비쿼터스 언어란**

도메인 주도 개발(DDD)에서 사용하는, 모든 팀원(개발자, 비즈니스 전문가, 사용자 등)이 공유하는 공통 언어입니다.

**목적**

비즈니스 도메인을 정확하게 반영하고, 기술적 오염을 최소화하며, 도메인 지식을 코드로 직접적이고 명확하게 표현하기 위함입니다.

**사용**
- 도메인 표현: 유비쿼터스 언어를 사용하여 실제 비즈니스 프로세스, 정책, 규칙을 코드에 직접적으로 표현합니다.
- 커뮤니케이션 개선: 모든 이해관계자가 동일한 용어를 사용함으로써 커뮤니케이션의 명확성과 효율성을 향상시킵니다.

**예시**

- 피자 주문 시 30분 내 도착하지 않으면 쿠폰 발행"과 같은 비즈니스 규칙을 직접적인 코드 형태로 표현합니다.
- 계약이라는 애매한 용어보다 보험계약 혹은 자동차 보험계약과 같이 도메인에 특화된 용어를 사용합니다.



### 바운디드 컨텍스트 (Bounded Context)

**정의**
- 도메인 모델의 경계를 정의하는 개념으로, 특정 모델이 유효한 맥락(컨텍스트)의 경계를 나타냅니다.
- 같은 용어가 다른 컨텍스트에서 다른 의미를 가질 수 있습니다. 예를 들어, '고객'이라는 용어는 주문 컨텍스트에서는 주문자를, 배송 컨텍스트에서는 수령인을 의미할 수 있습니다.

**특징**

- 각각의 도메인 모델은 해당 바운디드 컨텍스트 내에서만 정의되고 적용됩니다.
- 각 바운디드 컨텍스트 내에서 유비쿼터스 언어의 일관성이 유지되어야 합니다.

### 도메인 모델링

**정의**

- 모델은 현실 세계의 복잡성을 단순화한 추상적 표현입니다. 모든 모델은 완벽하지 않지만, 특정 목적에는 유용할 수 있습니다.
- 예시로 지하철 노선도는 실제 노선의 굴곡을 단순화한 직선적 표현입니다.

**적용**

- 바운드리 컨텍스트 내에서 도메인 모델이 정의되고, 이를 유비쿼터스 언어로 이를 표현합니다.
- 한 곳에서 신용카드 정보나 배송받을 주소 등을 같이 보관한다면 여러 마이크로서비스가 동일한 데이터에 접근해야하고, 이는 결국 결합도가 높아지는 것을 의미한다. 이를 방지하기 위해 도메인 모델을 통해 각 마이크로서비스가 필요한 데이터만을 가지도록 한다.

![바운디드 컨텍스트](../../image/bounded_context.png)
